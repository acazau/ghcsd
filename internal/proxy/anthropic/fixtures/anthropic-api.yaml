openapi: 3.1.0
info:
  title: Anthropic API
  version: 1.0.0
servers:
  - url: https://api.anthropic.com
paths:
  /:
    get:
      summary: Root endpoint
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
  /anthropic/health:
    get:
      summary: Health check endpoint
      responses:
        '200':
          description: Health check response
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [ok]
                  message:
                    type: string
                required:
                  - status
                  - message
  /v1/messages:
    post:
      summary: Create a message
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                stream:
                  type: boolean
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Message"
              examples:
                simple:
                  value:
                    $ref: "./test_responses.json#/simple"
                calculator:
                  value:
                    $ref: "./test_responses.json#/calculator"
                multi_turn:
                  value:
                    $ref: "./test_responses.json#/multi_turn"
            text/event-stream:
              schema:
                type: string
              examples:
                simple_stream:
                  value:
                    $ref: "./streaming_responses.json#/simple_stream"
                calculator_stream:
                  value:
                    $ref: "./streaming_responses.json#/calculator_stream"
  /v1/messages/count_tokens:
    post:
      summary: Count tokens in a message
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  input_tokens:
                    type: integer
                    minimum: 1
              examples:
                simple_text:
                  value:
                    $ref: "./token_count_responses.json#/simple_text"
                with_system:
                  value:
                    $ref: "./token_count_responses.json#/with_system"
                with_tools:
                  value:
                    $ref: "./token_count_responses.json#/with_tools"
components:
  schemas:
    Message:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
          enum: [message]
        role:
          type: string
          enum: [assistant]
        content:
          type: array
          items:
            oneOf:
              - type: object
                properties:
                  type:
                    type: string
                    enum: [text]
                  text:
                    type: string
                required:
                  - type
                  - text
              - type: object
                properties:
                  type:
                    type: string
                    enum: [tool_use]
                  tool_calls:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        type:
                          type: string
                        calculator:
                          type: object
                required:
                  - type
                  - tool_calls
        model:
          type: string
        stop_reason:
          type: string
          enum: [end_turn]
      required:
        - id
        - type
        - role
        - content
        - stop_reason
